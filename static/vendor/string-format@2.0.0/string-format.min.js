(function(t){"use strict";function n(t){var n=Error(t);return n.name="ValueError",n}function r(t){return function(r){var e=Array.prototype.slice.call(arguments,1),i=0,o="UNDEFINED";return r.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,function(r,u,c,f){if(null!=u)return u;var l=c;if(l.length>0){if("IMPLICIT"===o)throw n("cannot switch from implicit to explicit numbering");o="EXPLICIT"}else{if("EXPLICIT"===o)throw n("cannot switch from explicit to implicit numbering");o="IMPLICIT",l=String(i),i+=1}var a=l.split("."),p=(/^\d+$/.test(a[0])?a:["0"].concat(a)).reduce(function(t,n){return t.reduce(function(t,r){return null!=r&&n in Object(r)?["function"==typeof r[n]?r[n]():r[n]]:[]},[])},[e]).reduce(function(t,n){return n},"");if(null==f)return p;if(Object.prototype.hasOwnProperty.call(t,f))return t[f](p);throw n('no transformer named "'+f+'"')})}}var e=r({});e.create=r,e.extend=function(n,e){var i=r(e);n.format=function(){var n=Array.prototype.slice.call(arguments);return n.unshift(this),i.apply(t,n)}},"undefined"!=typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.stringformat=e}).call(this,this);